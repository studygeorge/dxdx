// Функция для предотвращения висячих предлогов
export const fixPrepositions = (text) => {
  if (!text) return text
  
  // Сначала обрабатываем целые фразы (более длинные словосочетания)
  const phrases = [
    'ваш растущий капитал',
    'они приносят',
    'какие стратегии',
    'чем больше действий',
    'тем больше доступов',
    'тем самым',
    'ключевая роль',
    'без надбавки',
    'вы можете',
    'вас о',
    '3, 6 или',
    'вы выводите',
    'вы имеете',
    'дважды в',
    'с 3 до',
    'не менее 7-9',
    'и активная партнёрская',















  ]
  
  let result = text
  
  // Заменяем пробелы внутри фраз на неразрывные
  phrases.forEach(phrase => {
    const regex = new RegExp(phrase.replace(/\s+/g, '\\s+'), 'gi')
    result = result.replace(regex, (match) => {
      return match.replace(/\s+/g, '\u00A0')
    })
  })
  
  // Затем обрабатываем отдельные слова
  const prepositions = [
    // Русские предлоги и союзы
    'и', 'в', 'во', 'на', 'с', 'со', 'к', 'ко', 'у', 'от', 'ото', 'из', 'изо',
    'по', 'о', 'об', 'обо', 'за', 'до', 'при', 'через', 'чтобы', 'без', 'безо',
    'под', 'подо', 'над', 'надо', 'перед', 'передо', 'между', 'для', 'что',
    'как', 'где', 'когда', 'куда', 'откуда', 'а', 'но', 'или', 'да', 'ни',
    // Русские количественные наречия и слова, которые не должны висеть в конце строки
    'более', 'менее', 'около', 'свыше', 'почти', 'примерно', 'порядка', 'до',
    // Русские притяжательные и указательные местоимения
    'ваш', 'ваша', 'ваше', 'ваши', 'наш', 'наша', 'наше', 'наши', 
    'мой', 'моя', 'моё', 'мои', 'твой', 'твоя', 'твоё', 'твои',
    'его', 'её', 'их', 'этот', 'эта', 'это', 'эти', 'тот', 'та', 'то', 'те',
    // Английские предлоги
    'a', 'an', 'the', 'in', 'on', 'at', 'to', 'for', 'of', 'with',
    'by', 'from', 'up', 'about', 'into', 'through', 'during', 'before',
    'after', 'above', 'below', 'between', 'among', 'under', 'over', 'and', 'or',
    // Английские количественные наречия
    'more', 'less', 'approximately', 'nearly', 'almost', 'around', 'over',
    // Английские притяжательные и указательные местоимения
    'your', 'our', 'my', 'his', 'her', 'their', 'this', 'that', 'these', 'those'
  ]
  
  prepositions.forEach(prep => {
    const regex = new RegExp(`(^|\\s)(${prep})\\s(?=\\S)`, 'gi')
    result = result.replace(regex, `$1$2\u00A0`)
  })
  
  return result
}